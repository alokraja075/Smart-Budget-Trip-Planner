# Smart Budget Trip Planner

An AI-powered trip planning application that optimizes your travel itinerary based on your budget constraints and personal preferences for cost, time, and comfort.

## Features

### Authentication
- User registration and login with Supabase Auth
- Protected routes for authenticated users
- Secure session management

### Trip Management
- Create trips with origin, destination, dates, and budget
- Set category-wise budget caps (transport, stay, activity, misc)
- Adjust preference weights for cost, time, and comfort optimization

### Intelligent Optimization
- **100% AI-Powered Recommendations**: All transport, accommodation, and activity options are generated by OpenAI based on your destination and budget
- AI generates realistic pricing and options for flights, trains, buses, hotels, and activities
- Scoring algorithm that balances multiple factors based on user preferences
- Real-time itinerary optimization with budget constraints

### Interactive Itinerary Board
- View optimized trip segments with provider details
- Lock/unlock segments to preserve preferred choices
- Browse alternatives for each segment
- Replace segments with better options
- Visual budget tracking with category breakdowns

### Comparison Tool
- Side-by-side view of current plan vs. proposed changes
- Adjust preferences and see estimated impact
- Delta indicators for price, time, and comfort changes

### AI-Powered Features
- **AI-Generated Itinerary**: All transport, accommodation, and activity recommendations are generated by OpenAI - no mock data
- **AI Trade-off Explanations**: Get detailed, intelligent explanations of why each segment was selected based on your preferences
- **Smart Activity Suggestions**: AI recommends 6 personalized activities based on your interests, budget, and destination
- **Weather & Travel Tips**: Get weather forecasts and location-specific travel advice powered by AI
- **Intelligent Optimization**: Automatic itinerary optimization with multi-factor scoring algorithm
- **Re-plan Impacted**: Automatically adjust segments based on delay or price change events
- **Interest-Based Planning**: Select from common interests or add custom ones for personalized suggestions

## Tech Stack

- **Frontend**: React 18 + TypeScript + Vite
- **Styling**: Tailwind CSS
- **Database**: Supabase (PostgreSQL)
- **Authentication**: Supabase Auth
- **AI**: OpenAI GPT-4o-mini for intelligent recommendations
- **Icons**: Lucide React

## Database Schema

- **auth.users**: Managed by Supabase Auth (stores user credentials and metadata)
- **trips**: Trip details with budget and status
- **budgets**: Category-wise spending caps
- **prefs**: User preference weights for optimization
- **segments**: Selected itinerary items
- **quotes**: Provider quotes for comparison
- **events**: Trip events for impact tracking

Note: User profiles use Supabase's built-in auth system with user metadata for names.

## Getting Started

1. Ensure environment variables are set in `.env`:
   ```
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   VITE_OPENAI_API_KEY=your_openai_api_key
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Run development server:
   ```bash
   npm run dev
   ```

4. Build for production:
   ```bash
   npm run build
   ```

## Usage Flow

1. **Register/Login**: Create an account or sign in
2. **Create Trip**: Set destination, dates, budget, and preferences
3. **Review Itinerary**: See AI-optimized segments with cost breakdown
4. **Get AI Insights**:
   - Click "Explain Trade-offs" for detailed AI explanations of your itinerary
   - Use "Weather & Tips" for location-specific travel advice
5. **Discover Activities**: Click "AI Activity Suggestions" to:
   - Select your interests (culture, food, adventure, etc.)
   - Get 6 personalized activity recommendations
   - Add activities directly to your trip
6. **Adjust Preferences**: Use sliders to fine-tune optimization weights
7. **Explore Alternatives**: View and select different provider options
8. **Compare Plans**: See side-by-side comparison with preference changes
9. **Lock Favorites**: Preserve specific segments while re-optimizing others

## Optimization Algorithm

The app uses a weighted scoring function:

```
score = w_cost × (price/maxPrice) + w_time × (duration/maxDuration) + w_comfort × (1 - comfort/maxComfort)
```

Where weights sum to 1.0 and lower scores indicate better options. The optimizer:
- Respects total budget and category caps
- Doesn't modify locked segments
- Selects best-scoring option per category
- Balances multiple competing factors

## AI Features in Detail

### Trade-off Explanations
Uses OpenAI GPT-4o-mini to analyze your itinerary and provide 4-5 detailed bullet points explaining:
- Why each segment was selected based on your priorities
- Trade-offs made between cost, time, and comfort
- How choices align with your preference weights
- Notable balance achieved between competing factors

### Activity Suggestions
Select from 8 common interest categories or add custom interests. The AI generates:
- 6 diverse activity recommendations
- Detailed descriptions for each activity
- Pricing, duration, and comfort ratings
- Categories (culture, adventure, food, nature, etc.)

### Weather & Travel Tips
Provides destination-specific information including:
- Expected weather conditions and temperature ranges
- Packing recommendations
- Seasonal highlights and festivals
- Health and safety considerations

## Future Enhancements

- Real provider API integrations (flights, hotels, activities)
- Multi-destination trip support with route optimization
- Collaborative trip planning with shared itineraries
- Export itinerary to calendar apps
- Real-time price tracking and alerts
- Integration with booking platforms
- Mobile app version
